
Starting run_untargeted_pipeline.py on: 2024-08-13 10:38:31.408855

Step 1/7: Syncing LIMS and NERSC to identify new projects with raw data that are not yet in the untargeted task list...
	Comparing LIMS untargeted tasks with raw files on disk...
	Finding new projects to initate...
	Checking for polarities in new projects and validating mzml file names...
		Project 20240801_EB_NK_108812-001_C13Ceru_20240719_QE119_HILICZ_USHXG02655_just12C has both polarities with 32 positive and 32 negative files
		Project 20240729_EB_NK_108812-001_C13Ceru_20240719_QE119_C18-EP_USDAY88220_just12C has both polarities with 33 positive and 33 negative files
	Working on 20240801_EB_NK_108812-001_C13Ceru_20240719_QE119_HILICZ_USHXG02655_just12C...
		Writing...
			positive metadata file (*_metadata.tab)...
			positive MZmine parameter file (*_batch-params.xml)...
			positive mzML path list file (*_filelist.txt)...
			positive sbatch submission script and runner files (*.sh, *.sbatch)
		Writing...
			negative metadata file (*_metadata.tab)...
			negative MZmine parameter file (*_batch-params.xml)...
			negative mzML path list file (*_filelist.txt)...
			negative sbatch submission script and runner files (*.sh, *.sbatch)
	Working on 20240729_EB_NK_108812-001_C13Ceru_20240719_QE119_C18-EP_USDAY88220_just12C...
		Writing...
			positive metadata file (*_metadata.tab)...
			positive MZmine parameter file (*_batch-params.xml)...
			positive mzML path list file (*_filelist.txt)...
			positive sbatch submission script and runner files (*.sh, *.sbatch)
		Writing...
			negative metadata file (*_metadata.tab)...
			negative MZmine parameter file (*_batch-params.xml)...
			negative mzML path list file (*_filelist.txt)...
			negative sbatch submission script and runner files (*.sh, *.sbatch)
	Updating LIMS table with 2 new projects...
		LIMS untargeted tasks table update complete.
	Exported new project info for MZmine submission.

Step 2/7: Checking and updating status of MZmine jobs in LIMS...
	Total of 11 project(s) with MZmine status ['01 initiation', '04 running'] to attempt to update
		Working on 20240724_JGI_SG_864_NLDMM-HTCC7211_pilot9_IQX_HILICZ_USHXG02519_SUPERNATANTRERUN in negative mode
			All MZmine output files found in negative directory, continuing...
			Calculating feature and background counts and updating LIMS table
				Warning! No ExCtrl samples found in peak height file
				1927 features in experimental samples
				1231 msms features in mgf file
				Filtering features by peak height ratio compared to background (control) signal and writing to file
				Warning! No background samples with designation ExCtrl could be found. Not filtering and returning empty dataframe.
		Working on 20240724_JGI_SG_864_NLDMM-HTCC7211_pilot9_IQX_HILICZ_USHXG02519_PELLETRERUN in positive mode
			All MZmine output files found in positive directory, continuing...
			Calculating feature and background counts and updating LIMS table
				1109 features in control samples
				2157 features in experimental samples
				1589 msms features in mgf file
				Filtering features by peak height ratio compared to background (control) signal and writing to file
				Warning! Could not calculate per-feature max intensities for peak height table. Not filtering and returning empty dataframe.
		Working on 20240724_JGI_SG_864_NLDMM-HTCC7211_pilot9_IQX_HILICZ_USHXG02519_PELLETRERUN in negative mode
			All MZmine output files found in negative directory, continuing...
			Calculating feature and background counts and updating LIMS table
				1106 features in control samples
				2195 features in experimental samples
				1456 msms features in mgf file
				Filtering features by peak height ratio compared to background (control) signal and writing to file
				Warning! Could not calculate per-feature max intensities for peak height table. Not filtering and returning empty dataframe.
		Working on 20240722_EB_CN_100834-038_ExudatorPl1abc_20240711_QE144_HILICZ_USHXG02554 in positive mode
			All MZmine output files found in positive directory, continuing...
			Calculating feature and background counts and updating LIMS table
				Warning! No ExCtrl samples found in peak height file
				176 features in experimental samples
				159 msms features in mgf file
				Filtering features by peak height ratio compared to background (control) signal and writing to file
				Warning! No background samples with designation ExCtrl could be found. Not filtering and returning empty dataframe.
	Updating statuses in LIMS table for 4 projects...
	MZmine status update complete.

Step 3/7: Submitting new MZmine jobs that are "initialized"...
	Total of 2 new MZmine job(s) with status ['01 initiation'] to submit
		Submitting positive mode mzmine job for project 20240801_EB_NK_108812-001_C13Ceru_20240719_QE119_HILICZ_USHXG02655_just12C
			Submitted batch job 29335198

		Submitting negative mode mzmine job for project 20240801_EB_NK_108812-001_C13Ceru_20240719_QE119_HILICZ_USHXG02655_just12C
			Submitted batch job 29335199

		Submitting positive mode mzmine job for project 20240729_EB_NK_108812-001_C13Ceru_20240719_QE119_C18-EP_USDAY88220_just12C
			Submitted batch job 29335200

		Submitting negative mode mzmine job for project 20240729_EB_NK_108812-001_C13Ceru_20240719_QE119_C18-EP_USDAY88220_just12C
			Submitted batch job 29335201

	MZmine submission(s) complete. Use sqs to monitor progress.

Step 4/7: Checking and updating status of FBMN jobs in LIMS...
	Total of 101 project(s) with FBMN status ['04 running', '13 waiting'] to attempt to update
	FBMN status update complete.

Step 5/7: Submitting new FBMN jobs to GNPS2...
	Total of 6 projects(s) with FBMN status ['13 waiting', '09 error'] and MZmine status 'complete' to submit to GNPS2
		Working on project 20181017_KBL_TM_C18_Lakes_Geodes-Mendota:
			Warning! 20181017_KBL_TM_C18_Lakes_Geodes-Mendota does not have a valid department name in the second field. Skipping...
			Warning! It looks like MZmine for 20181017_KBL_TM_C18_Lakes_Geodes-Mendota mode for negative hasn't completed yet. Skipping...
		Working on project 20180628_MV_AM_UCIAllison_DroughtLitter_20171213_QE144_Ag682775-924_USHXG01062:
			Warning! It looks like MZmine for 20180628_MV_AM_UCIAllison_DroughtLitter_20171213_QE144_Ag682775-924_USHXG01062 mode for positive hasn't completed yet. Skipping...
			Warning! 20180628_MV_AM_UCIAllison_DroughtLitter_20171213_QE144_Ag682775-924_USHXG01062 does not have a valid department name in the second field. Skipping...
		Working on project 20240724_EB_CN_100834-038_ExudatorPl1abc_20240711_QE144_C18-EP_USDAY86061:
			Warning! 20240724_EB_CN_100834-038_ExudatorPl1abc_20240711_QE144_C18-EP_USDAY86061 in positive mode has an error status. Attempting to resubmit...
		Working on project 20240724_JGI_SG_864_NLDMM-HTCC7211_pilot9_IQX_HILICZ_USHXG02519_SUPERNATANTRERUN:
			Submitted FBMN job.
